<section id="experience" class="bg-[#f3f4f6] text-gray-900 py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {{ with .Site.GetPage "experience" }}
    <h2 class="text-3xl font-bold text-center mb-12 font-heading text-gray-900">{{ .Params.intro }}</h2>

    <div class="text-center mb-12">
      <div class="flex space-x-4 justify-center">
        <a href="{{ $.Site.Params.resume_url_en }}" target="_blank" rel="noopener noreferrer"
           class="flex items-center bg-[#6D28D9] text-white text-lg px-6 py-4 rounded-lg font-semibold shadow hover:bg-[#4B2067] transition duration-300">
          <i class="fas fa-file-pdf text-2xl mr-3"></i>
          Download Resume (EN)
        </a>
        <a href="{{ $.Site.Params.resume_url_fr }}" target="_blank" rel="noopener noreferrer"
           class="flex items-center bg-[#6D28D9] text-white text-lg px-6 py-4 rounded-lg font-semibold shadow hover:bg-[#4B2067] transition duration-300">
          <i class="fas fa-file-pdf text-2xl mr-3"></i>
          Download Resume (FR)
        </a>
      </div>
    </div>

    <div class="relative pt-4">
      <!-- Timeline items -->
      <div class="space-y-8 md:space-y-16">
        {{ range $index, $exp := .Params.positions }}
        <div class="relative timeline-item">
          <div class="md:flex flex-col">
            <!-- Left or Right column -->
            <div class="md:w-full mb-4 md:mb-0 px-4 flex justify-between">
              <div class="max-w-xs">
                <h3 class="text-2xl md:text-3xl font-heading font-bold text-gray-900">{{ $exp.company }}</h3>
                <h4 class="text-lg md:text-xl font-semibold text-gray-700">{{ $exp.role }}</h4>
              </div>
              <div class="text-base md:text-lg font-semibold text-right text-gray-700">{{ $exp.period }}</div>
            </div>

            <!-- Bullet points -->
            <div class="md:w-full px-4 mt-4">
              <div class="bg-white shadow-lg p-6 rounded-lg opacity-0 transition-all duration-700" data-animate>
                <ul class="list-disc pl-5 space-y-2 text-gray-700">
                  {{ range $exp.bullet_points }}
                  <li>{{ . }}</li>
                  {{ end }}
                </ul>
              </div>
            </div>
          </div>
        </div>
        {{ end }}
      </div>
    </div>
    {{ end }}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0');
        entry.target.classList.add('opacity-100');
      } else {
        entry.target.classList.remove('opacity-100');
        entry.target.classList.add('opacity-0');
      }
    });
  }, { threshold: 0.2 });

  document.querySelectorAll('[data-animate]').forEach(el => {
    observer.observe(el);
  });
});
</script>
